# 1
- 雪花算法为long，JS的精度 53 位，Long 最大值为 2^63-1，超过这个数字 JS 会丢失精度，因此给前端时，转为字符串
    - 方案1：配置jackson，将long统一为string
    - 方案2：使用在dto的id字段加上注解   @JsonSerialize(using = ToStringSerializer.class)
    - 方案3：直接将dto的id字段设置为String
# 2
- springboot启动时，默认只会扫描所在包以及子包的bean和configuration，若是两模块的包名不符合，怎么办？
- 或者问：第三方包和你的包名不同，你的springboot如何扫描到它们的呢？
   - 被引入模块在resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports文件中
  写入要扫描的包或类的全名即可。

# 3
- 如果实体类的字段有list、map、数组、set等集合类型，使用mybatisplus如何处理映射？



# 4
- auth2的token机制是什么？之前做springboot security项目时，token发出去后，前端保存即可，无论怎么重启后端，都是可以用的。
- 这两种token机制有何不同？

# 5
- websocket连接的一大坑以及yml中配置统一前缀的问题。
## 错误背景：
### 配置：
- 网关security配置： .pathMatchers("/message/ws").permitAll()
- 网关路由配置不带StripPrefix=1 生效
- 消息服务的security配置：  .requestMatchers("/message/ws").permitAll()
- 消息服务的websocket配置：.addEndpoint("/ws")
- 消息服务的yml配置有：
    ```yaml
    server:
      port: 7055
      servlet:
      # 应用的访问路径
      context-path: /message
    ```
### 错误发生：
- 访问：ws://localhost:7049/message/ws，一直连接不了。
### 错误原因：
1. 网关服务允许"/message/ws",符合请求，因为请求后的端口号就是"/message/ws",所以网关配置是对的。
2. 然后网关的路由没有配置StripPrefix=1，所以路由的请求是ws://message-service/message/ws
消息服务收到后，由于在yml配置了context-path为“/message”，所以会剥离“/message”,请求就变成了“/ws”，
**这与消息服务配置的security允许的“/message/ws”不匹配**，所以拒绝放行导致无法握手。

